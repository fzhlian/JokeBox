"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.hashObject=exports.getSafeJsonStringIfy=exports.hashFile=exports.hash=exports.createHash=void 0;const crypto_1=__importDefault(require("crypto")),fs_1=__importDefault(require("fs")),createHash=(e="sha256")=>crypto_1.default.createHash(e);exports.createHash=createHash;const hash=(e,t)=>(0,exports.createHash)(t).update(e).digest("hex");exports.hash=hash;const hashFile=(e,t)=>{if(fs_1.default.existsSync(e))return(0,exports.hash)(fs_1.default.readFileSync(e,"utf-8"),t)};exports.hashFile=hashFile;const getSafeJsonStringIfy=e=>{const t=new WeakSet;function s(e){if(null===e||"object"!=typeof e)return"bigint"==typeof e?null:e;if(t.has(e))return null;if(t.add(e),Array.isArray(e))return e.map(s);const r={};return Object.keys(e).sort().forEach(t=>{"function"!=typeof e[t]&&"symbol"!=typeof e[t]&&(r[t]=s(e[t]))}),r}return JSON.stringify(e,function(e,t){return s(t)})};exports.getSafeJsonStringIfy=getSafeJsonStringIfy;const hashObject=e=>(0,exports.createHash)().update((0,exports.getSafeJsonStringIfy)(e)).digest("hex");exports.hashObject=hashObject;