"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractPluginBuilder=void 0;const stage_init_strategy_js_1=require("../strategy/stage-init-strategy.js"),fa_init_strategy_js_1=require("../strategy/fa-init-strategy.js"),ohos_module_task_js_1=require("../../tasks/task/ohos-module-task.js"),global_project_data_service_js_1=require("../../tasks/service/global-project-data-service.js"),ohos_logger_js_1=require("../../utils/log/ohos-logger.js");class AbstractPluginBuilder{constructor(t){this._log=ohos_logger_js_1.OhosLogger.getLogger(AbstractPluginBuilder.name),this.isFaMode=t,this.initializationStrategy=this.createInitializationStrategy()}build(){this._log.debug("Starting plugin build process"),this.prepare();const t=this.createPlugin();return this.registerHooks(t),this._log.debug("Plugin build process completed"),t}prepare(){}initializeTaskDepends(t,e,i){i||!e?t.getTaskContainer().getAllTasks().filter(t=>t instanceof ohos_module_task_js_1.OhosModuleTask).forEach(t=>t.initTaskDepends()):null==e||e.configure()}ifThrowBuildModeError(){const t=global_project_data_service_js_1.GlobalProjectDataService.getInstance().getBuildModeInfo(),e=t.buildModeName,i=t.buildProfilePath;t.ifThrowError&&this._log.printErrorExit("BUILD_MODE_NOT_DEFINED",[e,i],[[e,i]])}createInitializationStrategy(){return this.isFaMode?new fa_init_strategy_js_1.FaInitializationStrategy:new stage_init_strategy_js_1.StageInitializationStrategy}}exports.AbstractPluginBuilder=AbstractPluginBuilder;