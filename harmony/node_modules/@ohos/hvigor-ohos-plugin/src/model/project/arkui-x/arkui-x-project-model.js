"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,o,r){void 0===r&&(r=o);var s=Object.getOwnPropertyDescriptor(e,o);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,r,s)}:function(t,e,o,r){void 0===r&&(r=o),t[r]=e[o]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&__createBinding(e,t,o);return __setModuleDefault(e,t),e},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArkUIXProjectModel=void 0;const path_1=__importDefault(require("path")),fse=__importStar(require("fs-extra")),validate_util_js_1=require("../../../utils/validate/validate-util.js"),common_const_js_1=require("../../../const/common-const.js"),json_util_js_1=require("../../../utils/json-util.js"),crossplatform_const_js_1=require("../../../const/crossplatform-const.js"),ohos_logger_js_1=require("../../../utils/log/ohos-logger.js");class ArkUIXProjectModel{constructor(t,e,o){this.projectName=t,this.projectPath=e,this.profileOptions=o,this._log=ohos_logger_js_1.OhosLogger.getLogger(ArkUIXProjectModel.name),this.initArkUIXConfigJsonObj()}isCrossplatformProject(){return!!this._arkUIXConfigJsonObj&&this._arkUIXConfigJsonObj.crossplatform}getArkUIXConfigJsonPath(){return path_1.default.resolve(this.projectPath,crossplatform_const_js_1.ARKUIX_ROOT,crossplatform_const_js_1.ARKUIX_CONFIG_JSON5)}getArkUIXConfigJsonObj(){return this._arkUIXConfigJsonObj}initArkUIXConfigJsonObj(){const t=this.getArkUIXConfigJsonPath();fse.existsSync(t)&&(validate_util_js_1.ValidateUtil.submitSchemaCheckWork({moduleName:this.projectName,filePath:t,schemaPath:common_const_js_1.BuildProfileSchemaFileConst.ARKUI_X_CONFIG_SCHEMA_PATH}),this._arkUIXConfigJsonObj=json_util_js_1.JsonUtil.getJson5Obj(t),this.arkUIXModuleCheck())}arkUIXModuleCheck(){var t;const e=null===(t=this._arkUIXConfigJsonObj)||void 0===t?void 0:t.modules.reduce((t,e)=>(this.profileOptions.modules.some(t=>t.name===e)||t.push(e),t),[]);e&&e.length&&this._log.printErrorExit("INVALID_ARKUI_X_MODULE_NAME",[e.join('","'),this.getArkUIXConfigJsonPath()],[[this.getArkUIXConfigJsonPath()]])}}exports.ArkUIXProjectModel=ArkUIXProjectModel;