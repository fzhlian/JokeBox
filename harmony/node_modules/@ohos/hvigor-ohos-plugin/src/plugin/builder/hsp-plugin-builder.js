"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HspPluginBuilder=void 0;const abstract_plugin_builder_js_1=require("./abstract-plugin-builder.js"),hvigor_1=require("@ohos/hvigor"),module_ohos_config_manager_js_1=require("../../common/global/module-ohos-config-manager.js");class HspPluginBuilder extends abstract_plugin_builder_js_1.AbstractPluginBuilder{constructor(e,r=!1){super(r),this.module=e}get creatorManager(){return this._creatorManager}set creatorManager(e){this._creatorManager=e}createPlugin(){var e;return this._log.debug("Hsp plugin creating..."),null===(e=this.initializationStrategy)||void 0===e?void 0:e.createHspPlugin(this.module,this)}registerHooks(e){this._log.debug("Hsp plugin register hook start..."),hvigor_1.hvigorCore.hvigorAfterNodeInternalHook(this.module.getName(),async()=>{e.initContext()}),hvigor_1.hvigorCore.hvigorNodeEvaluatedInternalHook(()=>{var r;this.ifThrowBuildModeError(),null===(r=e.getTaskService())||void 0===r||r.initDependencyInfo(),this.creatorManager.configure()}),this._log.debug("Hsp plugin register hook end...")}initHspPluginGlobalData(e){var r;const o=null===(r=e.getConfigOpt())||void 0===r?void 0:r.getObject("ohos");o&&module_ohos_config_manager_js_1.moduleOhosConfigManager.loaderConfig(e.getName(),o)}}exports.HspPluginBuilder=HspPluginBuilder;