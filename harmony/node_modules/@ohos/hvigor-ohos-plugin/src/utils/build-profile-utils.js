"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCustomTypePathIfExists=exports.getRuntimeOnlyObjMap=exports.generateExportClass=exports.generateConstVariable=exports.normalizedFileData=void 0;const fs_extra_1=__importDefault(require("fs-extra")),path_1=__importDefault(require("path")),array_util_js_1=require("./array-util.js"),common_const_js_1=require("../const/common-const.js"),normalizedFileData=(e,t,s)=>`${(0,exports.generateConstVariable)(e,t,s)}\n${(0,exports.generateExportClass)(e)}`;exports.normalizedFileData=normalizedFileData;const generateConstVariable=(e,t,s)=>{const o="export const ";let r="/**\n * Use these variables when you tailor your ArkTS code. They must be of the const type.\n */\n";return Object.keys(e).forEach(a=>{const n=e[a];"string"==typeof n?r+=`${o+a} = '${n}';\n`:"number"==typeof n||"boolean"==typeof n?r+=`${o+a} = ${n};\n`:s.printErrorExit("BUILDPROFILEFIELDS_ONLY_SUPPORT_NUMBER_STRING_BOOLEAN",[typeof n,n,t.getModuleModel().getProfilePath()])}),r};exports.generateConstVariable=generateConstVariable;const generateExportClass=e=>{let t="/**\n * BuildProfile Class is used only for compatibility purposes.\n */\nexport default class BuildProfile { \n";return Object.keys(e).forEach(e=>{t+=`\t${"static readonly "+e} = ${e};\n`}),t+="}",t};exports.generateExportClass=generateExportClass;const getRuntimeOnlyObjMap=(e,t,s,o)=>{const r=new Map;return t?(t.sources&&t.sources.forEach(t=>{const s=path_1.default.resolve(e,t);fs_extra_1.default.existsSync(s)&&r.set(t,s)}),t.packages&&(0,array_util_js_1.isSubset)(s,t.packages)&&r.set(`runtimeOnlyPackages${null!=o?o:""}`,t.packages),t.excludePackages&&r.set(`runtimeOnlyExcludePackages${null!=o?o:""}`,t.excludePackages),r):r};exports.getRuntimeOnlyObjMap=getRuntimeOnlyObjMap;const getCustomTypePathIfExists=(e,t)=>{const s=path_1.default.isAbsolute(t)?t:path_1.default.resolve(e,t);for(const e of common_const_js_1.CustomTypesConst.CUSTOM_TYPES_SUFFIX){const t=`${s}${e}`;if(fs_extra_1.default.existsSync(`${s}${e}`))return t}for(const e of common_const_js_1.CustomTypesConst.CUSTOM_TYPES_INDEX){const t=path_1.default.resolve(s,e);if(fs_extra_1.default.existsSync(t))return t}};exports.getCustomTypePathIfExists=getCustomTypePathIfExists;