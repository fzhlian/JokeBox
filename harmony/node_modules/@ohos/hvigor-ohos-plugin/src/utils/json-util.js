"use strict";var __decorate=this&&this.__decorate||function(e,r,t,o){var n,s=arguments.length,i=s<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,r,t,o);else for(var _=e.length-1;_>=0;_--)(n=e[_])&&(i=(s<3?n(i):s>3?n(r,t,i):n(r,t))||i);return s>3&&i&&Object.defineProperty(r,t,i),i},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeStringJson=exports.getJson5ObjThrowError=exports.JsonUtil=void 0;const path_1=__importDefault(require("path")),hvigor_1=require("@ohos/hvigor"),hvigor_common_1=require("@ohos/hvigor-common"),fs_extra_1=__importDefault(require("fs-extra")),ohos_logger_js_1=require("./log/ohos-logger.js"),log=ohos_logger_js_1.OhosLogger.getLogger("json-util");class JsonUtil{static getJson5Obj(e,r="utf-8"){if(fs_extra_1.default.existsSync(e))try{const t=fs_extra_1.default.readFileSync(path_1.default.resolve(e),{encoding:r});return(0,hvigor_common_1.parseJsonText)(t)}catch(r){if(r instanceof SyntaxError){const t=r.message.split("at ");2===t.length&&log.printErrorExit("JSON_READER_SYNTAX_ERROR",[t[0].trim(),e,t[1].trim()])}log.printErrorExit("NOT_CORRECT_JSON_FORMAT",[e])}}}function getJson5ObjThrowError(e,r="utf-8"){if(!fs_extra_1.default.existsSync(e))return;const t=fs_extra_1.default.readFileSync(path_1.default.resolve(e),{encoding:r});return(0,hvigor_common_1.parseJsonText)(t)}function mergeStringJson(e,r){const t={string:[]},o=[];return null==e||e.string.forEach(e=>{t.string.push(e),o.push(e.name)}),null==r||r.string.forEach(e=>{o.includes(e.name)||t.string.push(e)}),t}__decorate([(0,hvigor_1.WithParamReplacement)()],JsonUtil,"getJson5Obj",null),exports.JsonUtil=JsonUtil,exports.getJson5ObjThrowError=getJson5ObjThrowError,exports.mergeStringJson=mergeStringJson;